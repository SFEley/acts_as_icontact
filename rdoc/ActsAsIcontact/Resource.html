<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: ActsAsIcontact::Resource</title>

	<link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

	<script src="../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../lib/acts_as_icontact/resource_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/acts_as_icontact/resource.rb">lib/acts_as_icontact/resource.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link">Object</p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#M000054">::all</a></li>
					
					<li><a href="#M000062">::base</a></li>
					
					<li><a href="#M000081">::boolean_fields</a></li>
					
					<li><a href="#M000091">::build_query</a></li>
					
					<li><a href="#M000070">::collection_name</a></li>
					
					<li><a href="#M000072">::connection</a></li>
					
					<li><a href="#M000075">::default_options</a></li>
					
					<li><a href="#M000053">::find</a></li>
					
					<li><a href="#M000056">::find_by_id</a></li>
					
					<li><a href="#M000073">::find_by_string</a></li>
					
					<li><a href="#M000055">::first</a></li>
					
					<li><a href="#M000079">::never_on_create</a></li>
					
					<li><a href="#M000080">::never_on_update</a></li>
					
					<li><a href="#M000039">::new</a></li>
					
					<li><a href="#M000074">::primary_key</a></li>
					
					<li><a href="#M000092">::query_collection</a></li>
					
					<li><a href="#M000076">::required_on_create</a></li>
					
					<li><a href="#M000078">::required_on_update</a></li>
					
					<li><a href="#M000069">::resource_name</a></li>
					
					<li><a href="#M000071">::uri_component</a></li>
					
					<li><a href="#M000082">::validate_options</a></li>
					
					<li><a href="#M000057">#==</a></li>
					
					<li><a href="#M000093">#check_required_fields</a></li>
					
					<li><a href="#M000086">#clean_properties</a></li>
					
					<li><a href="#M000087">#clean_value</a></li>
					
					<li><a href="#M000041">#connection</a></li>
					
					<li><a href="#M000061">#create_fields</a></li>
					
					<li><a href="#M000051">#error</a></li>
					
					<li><a href="#M000052">#errors</a></li>
					
					<li><a href="#M000040">#id</a></li>
					
					<li><a href="#M000058">#inspect</a></li>
					
					<li><a href="#M000042">#method_missing</a></li>
					
					<li><a href="#M000045">#new_record?</a></li>
					
					<li><a href="#M000090">#properties</a></li>
					
					<li><a href="#M000059">#property_names</a></li>
					
					<li><a href="#M000046">#save</a></li>
					
					<li><a href="#M000050">#save!</a></li>
					
					<li><a href="#M000060">#update_fields</a></li>
					
					<li><a href="#M000083">#validate_on_create</a></li>
					
					<li><a href="#M000085">#validate_on_save</a></li>
					
					<li><a href="#M000084">#validate_on_update</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../README_markdown.html">README.markdown</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../ActsAsIcontact.html">ActsAsIcontact</a></li>
				
					<li><a href="../ActsAsIcontact/Account.html">ActsAsIcontact::Account</a></li>
				
					<li><a href="../ActsAsIcontact/Campaign.html">ActsAsIcontact::Campaign</a></li>
				
					<li><a href="../ActsAsIcontact/ClientFolder.html">ActsAsIcontact::ClientFolder</a></li>
				
					<li><a href="../ActsAsIcontact/Config.html">ActsAsIcontact::Config</a></li>
				
					<li><a href="../ActsAsIcontact/ConfigError.html">ActsAsIcontact::ConfigError</a></li>
				
					<li><a href="../ActsAsIcontact/Contact.html">ActsAsIcontact::Contact</a></li>
				
					<li><a href="../ActsAsIcontact/ContactHistory.html">ActsAsIcontact::ContactHistory</a></li>
				
					<li><a href="../ActsAsIcontact/CustomField.html">ActsAsIcontact::CustomField</a></li>
				
					<li><a href="../ActsAsIcontact/List.html">ActsAsIcontact::List</a></li>
				
					<li><a href="../ActsAsIcontact/Message.html">ActsAsIcontact::Message</a></li>
				
					<li><a href="../ActsAsIcontact/MessageBounces.html">ActsAsIcontact::MessageBounces</a></li>
				
					<li><a href="../ActsAsIcontact/MessageClicks.html">ActsAsIcontact::MessageClicks</a></li>
				
					<li><a href="../ActsAsIcontact/MessageOpens.html">ActsAsIcontact::MessageOpens</a></li>
				
					<li><a href="../ActsAsIcontact/MessageStatistics.html">ActsAsIcontact::MessageStatistics</a></li>
				
					<li><a href="../ActsAsIcontact/QueryError.html">ActsAsIcontact::QueryError</a></li>
				
					<li><a href="../ActsAsIcontact/Rails.html">ActsAsIcontact::Rails</a></li>
				
					<li><a href="../ActsAsIcontact/Rails/Callbacks.html">ActsAsIcontact::Rails::Callbacks</a></li>
				
					<li><a href="../ActsAsIcontact/Rails/ClassMethods.html">ActsAsIcontact::Rails::ClassMethods</a></li>
				
					<li><a href="../ActsAsIcontact/Rails/ClassMethods/Lists.html">ActsAsIcontact::Rails::ClassMethods::Lists</a></li>
				
					<li><a href="../ActsAsIcontact/Rails/ClassMethods/Macro.html">ActsAsIcontact::Rails::ClassMethods::Macro</a></li>
				
					<li><a href="../ActsAsIcontact/Rails/ClassMethods/Mappings.html">ActsAsIcontact::Rails::ClassMethods::Mappings</a></li>
				
					<li><a href="../ActsAsIcontact/ReadOnly.html">ActsAsIcontact::ReadOnly</a></li>
				
					<li><a href="../ActsAsIcontact/ReadOnlyError.html">ActsAsIcontact::ReadOnlyError</a></li>
				
					<li><a href="../ActsAsIcontact/Resource.html">ActsAsIcontact::Resource</a></li>
				
					<li><a href="../ActsAsIcontact/ResourceCollection.html">ActsAsIcontact::ResourceCollection</a></li>
				
					<li><a href="../ActsAsIcontact/SaveError.html">ActsAsIcontact::SaveError</a></li>
				
					<li><a href="../ActsAsIcontact/Segment.html">ActsAsIcontact::Segment</a></li>
				
					<li><a href="../ActsAsIcontact/SegmentCriteria.html">ActsAsIcontact::SegmentCriteria</a></li>
				
					<li><a href="../ActsAsIcontact/Subresource.html">ActsAsIcontact::Subresource</a></li>
				
					<li><a href="../ActsAsIcontact/Subscription.html">ActsAsIcontact::Subscription</a></li>
				
					<li><a href="../ActsAsIcontact/ValidationError.html">ActsAsIcontact::ValidationError</a></li>
				
					<li><a href="../ActiveRecord.html">ActiveRecord</a></li>
				
					<li><a href="../ActiveRecord/Base.html">ActiveRecord::Base</a></li>
				
					<li><a href="../Bond.html">Bond</a></li>
				
					<li><a href="../Bond/Actions.html">Bond::Actions</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">ActsAsIcontact::Resource</h1>

		<div id="description">
			<p>
Base class for shared functionality between i<a
href="Contact.html">Contact</a> resources. Supports getting, finding,
saving, all that fun stuff.
</p>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="all-method" class="method-detail ">
				<a name="M000054"></a>

				<div class="method-heading">
				
					<span class="method-name">all</span><span
						class="method-args">(options={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns an array of resources starting at the base.
</p>
					

					
					<div class="method-source-code"
						id="all-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 122</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">options</span>={})
      <span class="ruby-identifier">query_options</span> = <span class="ruby-identifier">default_options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
      <span class="ruby-identifier">validate_options</span>(<span class="ruby-identifier">query_options</span>)
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">query_collection</span>(<span class="ruby-identifier">query_options</span>)
      <span class="ruby-constant">ResourceCollection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">result</span>)
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="find-method" class="method-detail ">
				<a name="M000053"></a>

				<div class="method-heading">
				
					<span class="method-name">find</span><span
						class="method-args">(type, options={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns a resource or collection of resources.
</p>
					

					
					<div class="method-source-code"
						id="find-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 106</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span>={})
      <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">type</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:first</span>
        <span class="ruby-identifier">first</span>(<span class="ruby-identifier">options</span>)
      <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:all</span>
        <span class="ruby-identifier">all</span>(<span class="ruby-identifier">options</span>)
      <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Integer</span>
        <span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">type</span>)
      <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
        <span class="ruby-identifier">find_by_string</span>(<span class="ruby-identifier">type</span>)  <span class="ruby-comment cmt"># Implemented in subclasses</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActsAsIcontact</span><span class="ruby-operator">::</span><span class="ruby-constant">QueryError</span>, <span class="ruby-node">&quot;Don't know how to find '#{type.to_s}'&quot;</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="find-by-id-method" class="method-detail ">
				<a name="M000056"></a>

				<div class="method-heading">
				
					<span class="method-name">find_by_id</span><span
						class="method-args">(id)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns the single resource at the URL identified by the passed integer.
Takes no options; this is not a search, this is a single record retrieval.
Raises an exception if the record can&#8217;t be found.
</p>
					

					
					<div class="method-source-code"
						id="find-by-id-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 139</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">id</span>)
      <span class="ruby-identifier">response</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">connection</span>[<span class="ruby-identifier">id</span>].<span class="ruby-identifier">get</span>
      <span class="ruby-identifier">parsed</span> = <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">response</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActsAsIcontact</span><span class="ruby-operator">::</span><span class="ruby-constant">QueryError</span>, <span class="ruby-node">&quot;iContact's response did not contain a #{resource_name}!&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parsed</span>[<span class="ruby-identifier">resource_name</span>]
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">parsed</span>[<span class="ruby-identifier">resource_name</span>])
    <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">RestClient</span><span class="ruby-operator">::</span><span class="ruby-constant">ResourceNotFound</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActsAsIcontact</span><span class="ruby-operator">::</span><span class="ruby-constant">QueryError</span>, <span class="ruby-node">&quot;The #{resource_name} with id #{id} could not be found&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="first-method" class="method-detail ">
				<a name="M000055"></a>

				<div class="method-heading">
				
					<span class="method-name">first</span><span
						class="method-args">(options={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns the first account associated with this username.
</p>
					

					
					<div class="method-source-code"
						id="first-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 130</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">first</span>(<span class="ruby-identifier">options</span>={})
      <span class="ruby-identifier">query_options</span> = <span class="ruby-identifier">default_options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>) <span class="ruby-comment cmt"># Minor optimization</span>
      <span class="ruby-identifier">validate_options</span>(<span class="ruby-identifier">query_options</span>)
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">query_collection</span>(<span class="ruby-identifier">query_options</span>)
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>[<span class="ruby-identifier">collection_name</span>].<span class="ruby-identifier">first</span>)
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="new-method" class="method-detail ">
				<a name="M000039"></a>

				<div class="method-heading">
				
					<span class="method-name">new</span><span
						class="method-args">(properties={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Creates a new resource object from a values hash. (Which is passed to us
via the magic of JSON.)
</p>
					

					
					<div class="method-source-code"
						id="new-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 10</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">properties</span>={})
      <span class="ruby-ivar">@properties</span> = <span class="ruby-identifier">clean_properties</span>(<span class="ruby-identifier">properties</span>)
      <span class="ruby-ivar">@new_record</span> = <span class="ruby-operator">!</span><span class="ruby-ivar">@properties</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>)
      <span class="ruby-comment cmt"># Initialize other useful attributes</span>
      <span class="ruby-ivar">@errors</span> = []
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	
		<div id="protected-class-method-details" class="method-section section">
			<h3 class="section-header">Protected Class Methods</h3>

		
			<div id="base-method" class="method-detail ">
				<a name="M000062"></a>

				<div class="method-heading">
				
					<span class="method-name">base</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The base RestClient resource that this particular class nests from.
Defaults to the clientFolders path since that&#8217;s the most common case.
</p>
					

					
					<div class="method-source-code"
						id="base-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 185</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">base</span>
      <span class="ruby-constant">ActsAsIcontact</span>.<span class="ruby-identifier">clientfolder</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="boolean-fields-method" class="method-detail ">
				<a name="M000081"></a>

				<div class="method-heading">
				
					<span class="method-name">boolean_fields</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Fields that operate as 0/1 boolean toggles. Can be assigned to with true
and false.
</p>
					

					
					<div class="method-source-code"
						id="boolean-fields-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 249</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">boolean_fields</span>
      []
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="collection-name-method" class="method-detail ">
				<a name="M000070"></a>

				<div class="method-heading">
				
					<span class="method-name">collection_name</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The name of the resource collection pulled from i<a
href="Contact.html">Contact</a>. Defaults to the lowercase pluralized
version of the class name.
</p>
					

					
					<div class="method-source-code"
						id="collection-name-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 197</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">collection_name</span>
      <span class="ruby-identifier">resource_name</span>.<span class="ruby-identifier">pluralize</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="connection-method" class="method-detail ">
				<a name="M000072"></a>

				<div class="method-heading">
				
					<span class="method-name">connection</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The RestClient resource object for this resource class. Its own find/update
methods will call on this, and singular objects will derive from it.
</p>
					

					
					<div class="method-source-code"
						id="connection-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 209</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">connection</span>
      <span class="ruby-identifier">base</span>[<span class="ruby-identifier">uri_component</span>]
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="default-options-method" class="method-detail ">
				<a name="M000075"></a>

				<div class="method-heading">
				
					<span class="method-name">default_options</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Options that are always passed on &#8216;find&#8217; requests unless
overridden.
</p>
					

					
					<div class="method-source-code"
						id="default-options-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 224</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default_options</span>
      {<span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">500</span>}
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="find-by-string-method" class="method-detail ">
				<a name="M000073"></a>

				<div class="method-heading">
				
					<span class="method-name">find_by_string</span><span
						class="method-args">(value)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Allows some subclasses to implement finding by a key identifier string. The
base resource just throws an exception.
</p>
					

					
					<div class="method-source-code"
						id="find-by-string-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 214</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">find_by_string</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActsAsIcontact</span><span class="ruby-operator">::</span><span class="ruby-constant">QueryError</span>, <span class="ruby-node">&quot;You cannot search on #{collection_name} with a string value!&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="never-on-create-method" class="method-detail ">
				<a name="M000079"></a>

				<div class="method-heading">
				
					<span class="method-name">never_on_create</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Fields that <em>cannot</em> be included for this resource upon creation.
</p>
					

					
					<div class="method-source-code"
						id="never-on-create-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 239</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">never_on_create</span>
      [<span class="ruby-identifier">primary_key</span>]
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="never-on-update-method" class="method-detail ">
				<a name="M000080"></a>

				<div class="method-heading">
				
					<span class="method-name">never_on_update</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Fields that <em>cannot</em> be included for this resource upon updating.
</p>
					

					
					<div class="method-source-code"
						id="never-on-update-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 244</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">never_on_update</span>
      []
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="primary-key-method" class="method-detail ">
				<a name="M000074"></a>

				<div class="method-heading">
				
					<span class="method-name">primary_key</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The primary key field for this resource. Used on updates.
</p>
					

					
					<div class="method-source-code"
						id="primary-key-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 219</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">primary_key</span>
      <span class="ruby-identifier">resource_name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;Id&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="required-on-create-method" class="method-detail ">
				<a name="M000076"></a>

				<div class="method-heading">
				
					<span class="method-name">required_on_create</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Fields that <em>must</em> be included for this resource upon creation.
</p>
					

					
					<div class="method-source-code"
						id="required-on-create-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 229</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">required_on_create</span>
      []
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="required-on-update-method" class="method-detail ">
				<a name="M000078"></a>

				<div class="method-heading">
				
					<span class="method-name">required_on_update</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Fields that <em>must</em> be included for this resource upon updating.
</p>
					

					
					<div class="method-source-code"
						id="required-on-update-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 234</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">required_on_update</span>
      [<span class="ruby-identifier">primary_key</span>]
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="resource-name-method" class="method-detail ">
				<a name="M000069"></a>

				<div class="method-heading">
				
					<span class="method-name">resource_name</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The name of the singular resource type pulled from i<a
href="Contact.html">Contact</a>. Defaults to the lowercase version of the
class name.
</p>
					

					
					<div class="method-source-code"
						id="resource-name-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 191</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resource_name</span>
      <span class="ruby-identifier">name</span>.<span class="ruby-identifier">demodulize</span>.<span class="ruby-identifier">downcase</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="uri-component-method" class="method-detail ">
				<a name="M000071"></a>

				<div class="method-heading">
				
					<span class="method-name">uri_component</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The URI component name corresponding to this resource type. In many cases
it&#8217;s the same as the collection name; exceptions include accounts
(&#8216;a&#8217;) and clientFolders (&#8216;c&#8217;).
</p>
					

					
					<div class="method-source-code"
						id="uri-component-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 203</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">uri_component</span>
      <span class="ruby-identifier">collection_name</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="validate-options-method" class="method-detail ">
				<a name="M000082"></a>

				<div class="method-heading">
				
					<span class="method-name">validate_options</span><span
						class="method-args">(options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Validation rules that ensure proper parameters are passed to i<a
href="Contact.html">Contact</a> on querying.
</p>
					

					
					<div class="method-source-code"
						id="validate-options-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 254</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">validate_options</span>(<span class="ruby-identifier">options</span>)
      <span class="ruby-comment cmt"># See: http://developer.icontact.com/forums/api-beta-moderated-support/there-upper-limit-result-sets#comment-136</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActsAsIcontact</span><span class="ruby-operator">::</span><span class="ruby-constant">QueryError</span>, <span class="ruby-value str">&quot;Limit must be between 1 and 500&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:limit</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:limit</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">500</span> 
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	
		<div id="private-class-method-details" class="method-section section">
			<h3 class="section-header">Private Class Methods</h3>

		
			<div id="build-query-method" class="method-detail ">
				<a name="M000091"></a>

				<div class="method-heading">
				
					<span class="method-name">build_query</span><span
						class="method-args">(options={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p class="missing-docs">(Not documented)</p>
					

					
					<div class="method-source-code"
						id="build-query-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 308</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">build_query</span>(<span class="ruby-identifier">options</span>={})
      <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">terms</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{k}=#{URI.escape(v.to_s)}&quot;</span>}
      <span class="ruby-identifier">build</span> = <span class="ruby-value str">&quot;?&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">terms</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'&amp;'</span>)
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="query-collection-method" class="method-detail ">
				<a name="M000092"></a>

				<div class="method-heading">
				
					<span class="method-name">query_collection</span><span
						class="method-args">(options={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p class="missing-docs">(Not documented)</p>
					

					
					<div class="method-source-code"
						id="query-collection-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 314</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query_collection</span>(<span class="ruby-identifier">options</span>={})
      <span class="ruby-identifier">uri_extension</span> = <span class="ruby-identifier">uri_component</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">build_query</span>(<span class="ruby-identifier">options</span>)
      <span class="ruby-identifier">response</span> = <span class="ruby-identifier">base</span>[<span class="ruby-identifier">uri_extension</span>].<span class="ruby-identifier">get</span>
      <span class="ruby-identifier">parsed</span> = <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">response</span>)
      <span class="ruby-identifier">parsed</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="--method" class="method-detail ">
				<a name="M000057"></a>

				<div class="method-heading">
				
					<span class="method-name">==</span><span
						class="method-args">(obj)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Two resources are identical if they have exactly the same property array.
</p>
					

					
					<div class="method-source-code"
						id="--source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 149</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">obj</span>)
      <span class="ruby-identifier">properties</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">properties</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="connection-method" class="method-detail ">
				<a name="M000041"></a>

				<div class="method-heading">
				
					<span class="method-name">connection</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns the specific RestClient connection for an existing resource. (E.g.,
the connection to &#8220;<a
href="http://api.icontact.com/icp/a/12345">api.icontact.com/icp/a/12345</a>&#8220;
for account 12345.) Returns nil if the resource is a new record.
</p>
					

					
					<div class="method-source-code"
						id="connection-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 25</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection</span>
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connection</span>[<span class="ruby-identifier">id</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_record?</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="error-method" class="method-detail ">
				<a name="M000051"></a>

				<div class="method-heading">
				
					<span class="method-name">error</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The first message from the <tt>errors</tt> array.
</p>
					

					
					<div class="method-source-code"
						id="error-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 96</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">error</span>
      <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="errors-method" class="method-detail ">
				<a name="M000052"></a>

				<div class="method-heading">
				
					<span class="method-name">errors</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The warning messages sent back by i<a href="Contact.html">Contact</a> on a
failed request.
</p>
					

					
					<div class="method-source-code"
						id="errors-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 101</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">errors</span>
      <span class="ruby-ivar">@errors</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="id-method" class="method-detail ">
				<a name="M000040"></a>

				<div class="method-heading">
				
					<span class="method-name">id</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns the primary key ID for an existing resource. Returns nil if the
resource is a new record.
</p>
					

					
					<div class="method-source-code"
						id="id-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 18</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id</span>
      <span class="ruby-ivar">@properties</span>[<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_record?</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="inspect-method" class="method-detail ">
				<a name="M000058"></a>

				<div class="method-heading">
				
					<span class="method-name">inspect</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns a nice formatted string for command line use.
</p>
					

					
					<div class="method-source-code"
						id="inspect-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 154</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
      <span class="ruby-identifier">properties</span>.<span class="ruby-identifier">to_yaml</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="method-missing-method" class="method-detail ">
				<a name="M000042"></a>

				<div class="method-heading">
				
					<span class="method-name">method_missing</span><span
						class="method-args">(method, *params)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Enables keys from the i<a href="Contact.html">Contact</a> resource to act
as attribute methods.
</p>
					

					
					<div class="method-source-code"
						id="method-missing-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 30</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">params</span>)
      <span class="ruby-identifier">property</span> = <span class="ruby-identifier">method</span>.<span class="ruby-identifier">to_s</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">property</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/(.*)=$/</span>  <span class="ruby-comment cmt"># It's a value assignment</span>
        <span class="ruby-ivar">@newvalues</span> <span class="ruby-operator">||=</span> []
        <span class="ruby-ivar">@newvalues</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">$1</span>
        <span class="ruby-ivar">@properties</span>[<span class="ruby-identifier">$1</span>] = <span class="ruby-identifier">clean_value</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>])
       <span class="ruby-keyword kw">else</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@properties</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">property</span>)
          <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">boolean_fields</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">property</span>)
            (<span class="ruby-ivar">@properties</span>[<span class="ruby-identifier">property</span>] <span class="ruby-operator">==</span> <span class="ruby-value">1</span>)
          <span class="ruby-keyword kw">else</span>
            <span class="ruby-ivar">@properties</span>[<span class="ruby-identifier">property</span>]
          <span class="ruby-keyword kw">end</span>
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-keyword kw">super</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="new-record--method" class="method-detail ">
				<a name="M000045"></a>

				<div class="method-heading">
				
					<span class="method-name">new_record?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns true if the resource object did not originate from i<a
href="Contact.html">Contact</a>. We determine this by the rather naive
method of checking upon creation whether one of the properties passed was
the primary key.
</p>
					

					
					<div class="method-source-code"
						id="new-record--source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 52</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_record?</span>
      <span class="ruby-ivar">@new_record</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="property-names-method" class="method-detail ">
				<a name="M000059"></a>

				<div class="method-heading">
				
					<span class="method-name">property_names</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
An array of all defined property keys for this resource.
</p>
					

					
					<div class="method-source-code"
						id="property-names-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 159</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">property_names</span>
      <span class="ruby-identifier">properties</span>.<span class="ruby-identifier">symbolize_keys</span>.<span class="ruby-identifier">keys</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="save-method" class="method-detail ">
				<a name="M000046"></a>

				<div class="method-heading">
				
					<span class="method-name">save</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Sends changes to i<a href="Contact.html">Contact</a>. Returns true if the
save was successful (i.e. we receive an updated object back from them); if
it was not, returns false and populates the <tt>errors</tt> array with the
warnings i<a href="Contact.html">Contact</a> sends to us. If i<a
href="Contact.html">Contact</a> returns an HTTP error, raises an exception
with it.
</p>
					

					
					<div class="method-source-code"
						id="save-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 60</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_record?</span>
        <span class="ruby-identifier">fields</span> = <span class="ruby-identifier">create_fields</span>
        <span class="ruby-identifier">validate_on_create</span>(<span class="ruby-identifier">fields</span>)
        <span class="ruby-identifier">result_type</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">collection_name</span>
        <span class="ruby-identifier">response</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">post</span>([<span class="ruby-identifier">fields</span>].<span class="ruby-identifier">to_json</span>)
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">fields</span> = <span class="ruby-identifier">update_fields</span>
        <span class="ruby-identifier">validate_on_update</span>(<span class="ruby-identifier">fields</span>)
        <span class="ruby-identifier">result_type</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">resource_name</span>
        <span class="ruby-identifier">response</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">post</span>(<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">to_json</span>)
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">parsed</span> = <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">response</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>[<span class="ruby-identifier">result_type</span>].<span class="ruby-identifier">empty?</span>
        <span class="ruby-ivar">@errors</span> = <span class="ruby-identifier">parsed</span>[<span class="ruby-value str">&quot;warnings&quot;</span>] <span class="ruby-operator">||</span> []
        <span class="ruby-keyword kw">false</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-ivar">@properties</span> = (<span class="ruby-identifier">new_record?</span> <span class="ruby-value">? </span><span class="ruby-identifier">parsed</span>[<span class="ruby-identifier">result_type</span>].<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">parsed</span>[<span class="ruby-identifier">result_type</span>])
        <span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword kw">false</span>
        <span class="ruby-ivar">@errors</span> = []
        <span class="ruby-keyword kw">true</span>
      <span class="ruby-keyword kw">end</span> 
    <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">RestClient</span><span class="ruby-operator">::</span><span class="ruby-constant">RequestFailed</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
      <span class="ruby-identifier">response</span> = <span class="ruby-identifier">e</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
      <span class="ruby-identifier">parsed</span> = <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">response</span>)
      <span class="ruby-ivar">@errors</span> = <span class="ruby-identifier">parsed</span>[<span class="ruby-value str">&quot;errors&quot;</span>] <span class="ruby-operator">||</span> [<span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>]
      <span class="ruby-keyword kw">false</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="save--method" class="method-detail ">
				<a name="M000050"></a>

				<div class="method-heading">
				
					<span class="method-name">save!</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Like <tt>save</tt>, but raises an <a
href="SaveError.html">ActsAsIcontact::SaveError</a> exception if the save
failed. The exception message contains the first error from i<a
href="Contact.html">Contact</a>.
</p>
					

					
					<div class="method-source-code"
						id="save--source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 91</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save!</span>
      <span class="ruby-identifier">save</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActsAsIcontact</span><span class="ruby-operator">::</span><span class="ruby-constant">SaveError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">errors</span>)
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	
		<div id="protected-instance-method-details" class="method-section section">
			<h3 class="section-header">Protected Instance Methods</h3>

		
			<div id="clean-properties-method" class="method-detail ">
				<a name="M000086"></a>

				<div class="method-heading">
				
					<span class="method-name">clean_properties</span><span
						class="method-args">(properties={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Finesses the properties hash passed in to make i<a
href="Contact.html">Contact</a> and Ruby idioms compatible. Turns symbol
keys into strings and runs the <a
href="Resource.html#M000087">clean_value</a> method on values. Subclasses
may add additional conversions.
</p>
					

					
					<div class="method-source-code"
						id="clean-properties-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 279</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clean_properties</span>(<span class="ruby-identifier">properties</span>={})
      <span class="ruby-identifier">newhash</span> = {}
      <span class="ruby-identifier">properties</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">newhash</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">clean_value</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">newhash</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="clean-value-method" class="method-detail ">
				<a name="M000087"></a>

				<div class="method-heading">
				
					<span class="method-name">clean_value</span><span
						class="method-args">(value)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Finesses values passed in to properties to make i<a
href="Contact.html">Contact</a> and Ruby idioms compatible. Turns symbols
into strings, numbers into integers or floats, true/false into 1 and 0, and
empty strings into nil. Subclasses may add additional conversions.
</p>
					

					
					<div class="method-source-code"
						id="clean-value-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 290</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clean_value</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Symbol</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TrueClass</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-constant">FalseClass</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value">0</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\d+$/</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_i</span>  <span class="ruby-comment cmt"># Integer</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\d+(\.\d+)?([eE]\d+)?$/</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_f</span>  <span class="ruby-comment cmt"># Float</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">blank?</span> <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">nil</span>
      <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword kw">end</span> 
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="create-fields-method" class="method-detail ">
				<a name="M000061"></a>

				<div class="method-heading">
				
					<span class="method-name">create_fields</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The minimum set of fields that must be sent back to i<a
href="Contact.html">Contact</a> on a create. Includes any fields that were
added and anything else from the &#8220;<a
href="Resource.html#M000076">required_on_create</a>&#8220; set from the
class definition. It excludes anything from the &#8220;<a
href="Resource.html#M000079">never_on_create</a>&#8220; set.
</p>
					

					
					<div class="method-source-code"
						id="create-fields-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 177</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_fields</span>
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">required_on_create</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@properties</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;&quot;</span>} <span class="ruby-comment cmt"># Add required fields</span>
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">never_on_create</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@properties</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)} <span class="ruby-comment cmt"># Remove prohibited fields</span>
      <span class="ruby-ivar">@properties</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="properties-method" class="method-detail ">
				<a name="M000090"></a>

				<div class="method-heading">
				
					<span class="method-name">properties</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The properties array, for comparison against other resources or debugging.
</p>
					

					
					<div class="method-source-code"
						id="properties-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 303</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">properties</span>
      <span class="ruby-ivar">@properties</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="update-fields-method" class="method-detail ">
				<a name="M000060"></a>

				<div class="method-heading">
				
					<span class="method-name">update_fields</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The minimum set of fields that must be sent back to i<a
href="Contact.html">Contact</a> on an update. Includes any fields that
changed or were added, the primary key, and anything else from the
&#8220;<a href="Resource.html#M000078">required_on_update</a>&#8220; set
from the class definition. It excludes anything from the &#8220;<a
href="Resource.html#M000080">never_on_update</a>&#8220; set.
</p>
					

					
					<div class="method-source-code"
						id="update-fields-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 168</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_fields</span>
      <span class="ruby-identifier">fieldlist</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">required_on_update</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@newvalues</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-operator">-</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">never_on_update</span>
      <span class="ruby-ivar">@properties</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">fieldlist</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">key</span>)}
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="validate-on-create-method" class="method-detail ">
				<a name="M000083"></a>

				<div class="method-heading">
				
					<span class="method-name">validate_on_create</span><span
						class="method-args">(fields)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Validation rules that ensure proper data is passed to i<a
href="Contact.html">Contact</a> on resource creation.
</p>
					

					
					<div class="method-source-code"
						id="validate-on-create-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 260</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate_on_create</span>(<span class="ruby-identifier">fields</span>)
      <span class="ruby-identifier">check_required_fields</span>(<span class="ruby-identifier">fields</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">required_on_create</span>)
      <span class="ruby-identifier">validate_on_save</span>(<span class="ruby-identifier">fields</span>)
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="validate-on-save-method" class="method-detail ">
				<a name="M000085"></a>

				<div class="method-heading">
				
					<span class="method-name">validate_on_save</span><span
						class="method-args">(fields)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Validation rules that apply to both creates and updates. The method on the
abstract <a href="Resource.html">Resource</a> class is just a placeholder;
this is intended to be used by resource subclasses.
</p>
					

					
					<div class="method-source-code"
						id="validate-on-save-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 273</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate_on_save</span>(<span class="ruby-identifier">fields</span>)
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="validate-on-update-method" class="method-detail ">
				<a name="M000084"></a>

				<div class="method-heading">
				
					<span class="method-name">validate_on_update</span><span
						class="method-args">(fields)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Validation rules that ensure proper data is passed to i<a
href="Contact.html">Contact</a> on resource update.
</p>
					

					
					<div class="method-source-code"
						id="validate-on-update-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 266</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate_on_update</span>(<span class="ruby-identifier">fields</span>)
      <span class="ruby-identifier">check_required_fields</span>(<span class="ruby-identifier">fields</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">required_on_update</span>)
      <span class="ruby-identifier">validate_on_save</span>(<span class="ruby-identifier">fields</span>)
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="check-required-fields-method" class="method-detail ">
				<a name="M000093"></a>

				<div class="method-heading">
				
					<span class="method-name">check_required_fields</span><span
						class="method-args">(fields, required)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p class="missing-docs">(Not documented)</p>
					

					
					<div class="method-source-code"
						id="check-required-fields-source">
<pre>
<span class="ruby-comment cmt"># File lib/acts_as_icontact/resource.rb, line 321</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_required_fields</span>(<span class="ruby-identifier">fields</span>, <span class="ruby-identifier">required</span>)
      <span class="ruby-comment cmt"># Check that all required fields are filled in</span>
      <span class="ruby-identifier">missing</span> = <span class="ruby-identifier">required</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">fields</span>[<span class="ruby-identifier">f</span>].<span class="ruby-identifier">blank?</span>}
      <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">missing</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">missing_fields</span> = <span class="ruby-identifier">missing</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActsAsIcontact</span><span class="ruby-operator">::</span><span class="ruby-constant">ValidationError</span>, <span class="ruby-node">&quot;Missing required fields: #{missing_fields}&quot;</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

